<div class="board-list-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">{{ i18n.t.boards.title }}</h1>
      <p class="page-subtitle">{{ i18n.t.boards.subtitle }}</p>
    </div>
    <button 
      pButton 
      [label]="i18n.t.boards.createBoard" 
      icon="pi pi-plus" 
      class="p-button-primary"
      (click)="openCreateDialog()"
    ></button>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="boards-grid">
      @for (item of [1,2,3,4,5,6]; track item) {
        <div class="board-card-skeleton">
          <p-skeleton width="100%" height="120px"></p-skeleton>
          <p-skeleton width="80%" height="20px" styleClass="mt-3"></p-skeleton>
          <p-skeleton width="60%" height="16px" styleClass="mt-2"></p-skeleton>
        </div>
      }
    </div>
  }

  <!-- Error State -->
  @if (hasError() && !isLoading()) {
    <div class="empty-state">
      <i class="pi pi-exclamation-circle error-icon"></i>
      <h3>{{ i18n.t.boards.error }}</h3>
      <button 
        pButton 
        label="Retry" 
        icon="pi pi-refresh" 
        class="p-button-text"
        (click)="loadBoards()"
      ></button>
    </div>
  }

  <!-- Empty State -->
  @if (!isLoading() && !hasError() && boards().length === 0) {
    <div class="empty-state">
      <i class="pi pi-inbox empty-icon"></i>
      <h3>{{ i18n.t.boards.noBoards }}</h3>
      <p>{{ i18n.t.boards.noBoardsDescription }}</p>
      <button 
        pButton 
        [label]="i18n.t.boards.createBoard" 
        icon="pi pi-plus" 
        class="p-button-primary mt-3"
        (click)="openCreateDialog()"
      ></button>
    </div>
  }

  <!-- Boards Grid -->
  @if (!isLoading() && !hasError() && boards().length > 0) {
    <div class="boards-grid">
      @for (board of boards(); track board.id) {
        <div class="board-card" (click)="openBoard(board)">
          <div class="board-card-header">
            <div class="board-icon">
              <i class="pi pi-th-large"></i>
            </div>
            <div class="board-actions">
              <button 
                pButton 
                icon="pi pi-pencil" 
                class="p-button-text p-button-sm p-button-rounded"
                [pTooltip]="i18n.t.boards.edit"
                (click)="openEditDialog(board); $event.stopPropagation()"
              ></button>
              <button 
                pButton 
                icon="pi pi-trash" 
                class="p-button-text p-button-sm p-button-rounded p-button-danger"
                [pTooltip]="i18n.t.boards.delete"
                (click)="confirmDelete(board, $event); $event.stopPropagation()"
              ></button>
            </div>
          </div>
          
          <div class="board-card-content">
            <h3 class="board-name">{{ board.name }}</h3>
            @if (board.description) {
              <p class="board-description">{{ board.description }}</p>
            }
          </div>

          <div class="board-card-footer">
            <span class="board-date">
              <i class="pi pi-calendar"></i>
              {{ formatDate(board.createdAt) }}
            </span>
            @if (board.updatedAt) {
              <span class="board-date board-updated">
                <i class="pi pi-sync"></i>
                {{ formatDate(board.updatedAt) }}
              </span>
            }
          </div>
        </div>
      }
    </div>
  }
</div>

<!-- Dialog Create/Edit Board -->
<p-dialog 
  [(visible)]="showDialog" 
  [header]="isEditMode() ? i18n.t.boards.dialog.editTitle : i18n.t.boards.dialog.createTitle"
  [modal]="true"
  [style]="{width: '550px'}"
  [draggable]="false"
  [resizable]="false"
  (onHide)="closeDialog()"
>
  <div class="dialog-content">
    <div class="p-fluid">
      <!-- Name -->
      <div class="field">
        <label for="boardName">
          <i class="pi pi-tag"></i>
          {{ i18n.t.boards.dialog.name }} *
        </label>
        <input 
          id="boardName"
          type="text" 
          pInputText 
          [(ngModel)]="boardName"
          [placeholder]="i18n.t.boards.dialog.namePlaceholder"
          [disabled]="isSaving()"
        />
      </div>

      <!-- Description -->
      <div class="field">
        <label for="boardDescription">
          <i class="pi pi-align-left"></i>
          {{ i18n.t.boards.dialog.description }}
        </label>
        <textarea 
          id="boardDescription"
          pTextarea 
          [(ngModel)]="boardDescription"
          [placeholder]="i18n.t.boards.dialog.descriptionPlaceholder"
          [rows]="4"
          [disabled]="isSaving()"
        ></textarea>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <button 
      pButton 
      [label]="i18n.t.boards.dialog.cancel" 
      icon="pi pi-times" 
      class="p-button-text p-button-secondary"
      (click)="closeDialog()"
      [disabled]="isSaving()"
    ></button>
    <button 
      pButton 
      [label]="isEditMode() ? i18n.t.boards.dialog.save : i18n.t.boards.dialog.create" 
      icon="pi pi-check" 
      class="p-button-primary"
      (click)="saveBoard()"
      [loading]="isSaving()"
    ></button>
  </ng-template>
</p-dialog>

<!-- Confirm Dialog -->
<p-confirmDialog></p-confirmDialog>

<!-- Toast Messages -->
<p-toast></p-toast>
